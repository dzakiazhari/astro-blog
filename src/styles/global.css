@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@400;500;600;700&display=swap");
@import "tailwindcss";
@import "./typography.css";

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

:root,
html[data-theme="light"] {
  --font-sans:
    "IBM Plex Sans", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
    "Noto Sans", sans-serif;
  --font-mono:
    "IBM Plex Mono", "SFMono-Regular", Menlo, Consolas, "Liberation Mono",
    monospace;

  --light: #fcf5e4;
  --lightgray: #e4dcc8;
  --gray: #a29583;
  --darkgray: #51463a;
  --dark: #231d16;
  --secondary: #5d8f63;
  --tertiary: #d3a567;
  --accent: color-mix(in srgb, var(--secondary) 90%, white 10%);
  --heading-accent: color-mix(in srgb, var(--secondary) 82%, var(--dark) 18%);
  --highlight: rgba(93, 143, 99, 0.22);
  --text-highlight: rgba(255, 214, 140, 0.45);
  --radius-xs: 2px;
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 12px;

  --body-bg: var(--light);
  --body-text: color-mix(in srgb, var(--dark) 90%, black 10%);
  --muted-text: color-mix(in srgb, var(--gray) 64%, var(--darkgray) 36%);
  --surface-outline: color-mix(in srgb, var(--lightgray) 70%, var(--gray) 30%);
  --surface-outline-strong: color-mix(
    in srgb,
    var(--lightgray) 78%,
    var(--gray) 22%
  );
  --surface-subtle: color-mix(in srgb, var(--light) 92%, white 8%);
  --surface-raised: color-mix(in srgb, var(--light) 96%, white 4%);
  --surface-raised-strong: color-mix(in srgb, var(--light) 88%, white 12%);
  --app-background: color-mix(in srgb, var(--body-bg) 96%, white 4%);
  --border-soft: color-mix(in srgb, var(--surface-outline) 74%, transparent);
  --border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 84%,
    transparent
  );
  --card-border: color-mix(in srgb, var(--surface-outline) 78%, transparent);
  --card-border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 88%,
    transparent
  );
  --card-shadow: none;
  --card-shadow-hover: none;
  --divider-soft: color-mix(in srgb, var(--surface-outline) 70%, transparent);
  --divider-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 90%,
    transparent
  );
  --shell-shadow: 0 22px 40px -32px rgba(30, 26, 20, 0.32);
  --header-surface: color-mix(in srgb, var(--light) 96%, white 4%);
  --header-divider: color-mix(in srgb, var(--lightgray) 62%, var(--gray) 38%);
  --header-shadow: 0 22px 40px -32px rgba(30, 26, 20, 0.35);
  --sidebar-surface: color-mix(in srgb, var(--light) 94%, white 6%);
  --sidebar-surface-hover: color-mix(in srgb, var(--light) 86%, white 14%);
  --control-surface: color-mix(in srgb, var(--sidebar-surface) 92%, white 8%);
  --control-hover: color-mix(
    in srgb,
    var(--sidebar-surface-hover) 92%,
    white 8%
  );
  --control-border: color-mix(in srgb, var(--surface-outline) 72%, transparent);
  --control-border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 82%,
    transparent
  );
  --control-shadow: 0 18px 36px -24px rgba(50, 40, 28, 0.28);
  --nav-surface: #f8f1e6;
  --nav-border: color-mix(in srgb, var(--surface-outline) 78%, transparent);
  --nav-hover-bg: color-mix(
    in srgb,
    var(--sidebar-surface-hover) 92%,
    transparent
  );
  --nav-active-bg: color-mix(
    in srgb,
    var(--secondary) 18%,
    var(--sidebar-surface)
  );
  --nav-text: color-mix(in srgb, var(--muted-text) 82%, var(--body-text) 18%);
  --nav-text-strong: color-mix(in srgb, var(--secondary) 90%, white 10%);
  --link-plain: color-mix(in srgb, var(--secondary) 70%, var(--dark) 30%);
  --link-hover: color-mix(in srgb, var(--tertiary) 60%, var(--secondary) 40%);
  --badge-surface: color-mix(in srgb, var(--highlight) 48%, transparent);
  --badge-border: color-mix(in srgb, var(--surface-outline) 66%, transparent);
  --badge-text: color-mix(in srgb, var(--darkgray) 92%, var(--secondary) 8%);
  --ring-accent: color-mix(in srgb, var(--secondary) 32%, transparent);
  --accent-underline: linear-gradient(
    90deg,
    var(--secondary),
    color-mix(in srgb, var(--secondary) 48%, var(--tertiary))
  );
  --pill-radius: var(--radius-lg);
  --pill-gap: 0.34rem;
  --pill-surface: color-mix(in srgb, var(--surface-raised) 92%, white 8%);
  --pill-hover-surface: color-mix(
    in srgb,
    var(--secondary) 20%,
    var(--pill-surface)
  );
  --pill-active-surface: color-mix(
    in srgb,
    var(--secondary) 30%,
    var(--pill-surface)
  );
  --pill-ghost-surface: color-mix(
    in srgb,
    var(--pill-surface) 58%,
    transparent
  );
  --pill-ghost-hover: color-mix(
    in srgb,
    var(--pill-hover-surface) 72%,
    transparent
  );
  --pill-ghost-active: color-mix(
    in srgb,
    var(--pill-active-surface) 78%,
    transparent
  );
  --pill-border: color-mix(in srgb, var(--surface-outline) 74%, transparent);
  --pill-border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 86%,
    transparent
  );
  --pill-text: color-mix(in srgb, var(--muted-text) 76%, var(--body-text) 24%);
  --pill-text-strong: color-mix(in srgb, var(--nav-text-strong) 88%, white 12%);
  --pill-shadow: 0 18px 40px -28px rgba(38, 30, 22, 0.34);
  --type-body-size: clamp(0.96rem, 0.9rem + 0.2vw, 1.08rem);
  --type-body-leading: 1.68;
  --type-body-letter: -0.006em;
  --type-body-small: clamp(0.88rem, 0.84rem + 0.14vw, 0.98rem);
  --type-body-small-leading: 1.55;
  --type-heading-xl: clamp(2.08rem, 1.78rem + 1.4vw, 2.64rem);
  --type-heading-lg: clamp(1.42rem, 1.26rem + 0.68vw, 1.86rem);
  --type-heading-md: clamp(1.12rem, 1.02rem + 0.46vw, 1.42rem);
  --card-padding-inline: 1.05rem;
  --card-padding-block: 1.25rem;
  --card-content-gap: 0.95rem;
  --card-meta-size: 0.64rem;
  --card-meta-tracking: 0.22em;
  --card-heading-h2: var(--type-heading-lg);
  --card-heading-h3: var(--type-heading-md);
  --card-heading-h3-min-height: calc(var(--card-heading-h3) * 1.4 * 2);
  --card-body-size: var(--type-body-small);
  --card-body-leading: var(--type-body-small-leading);
  --card-footer-size: 0.62rem;
  --card-footer-tracking: 0.2em;
  --card-min-height-h3: 10.75rem;
  --card-icon-surface: color-mix(in srgb, var(--surface-raised) 90%, white 10%);
  --card-icon-border: color-mix(
    in srgb,
    var(--surface-outline) 82%,
    transparent
  );
  --card-icon-shadow: 0 20px 44px -30px rgba(38, 30, 22, 0.28);
  --card-icon-shadow-hover: 0 24px 56px -30px rgba(38, 30, 22, 0.34);
  --card-icon-foreground: color-mix(
    in srgb,
    var(--secondary) 82%,
    var(--darkgray) 18%
  );
  --code-card-surface: color-mix(in srgb, var(--surface-raised) 92%, white 8%);
  --code-card-border: color-mix(in srgb, var(--border-strong) 86%, transparent);
  --code-card-shadow: 0 24px 52px -30px rgba(40, 32, 24, 0.28);
  --code-copy-offset: 1.25rem;
  --code-copy-text: color-mix(in srgb, var(--nav-text-strong) 88%, white 12%);
  --code-copy-bg: color-mix(
    in srgb,
    var(--pill-surface) 78%,
    var(--secondary) 22%
  );
  --code-copy-border: color-mix(
    in srgb,
    var(--pill-border-strong) 72%,
    var(--secondary) 28%
  );
  --code-copy-hover-bg: color-mix(
    in srgb,
    var(--pill-hover-surface) 72%,
    var(--secondary) 28%
  );
  --code-copy-active-bg: color-mix(
    in srgb,
    var(--pill-active-surface) 64%,
    var(--secondary) 36%
  );
  --code-copy-ring: color-mix(in srgb, var(--secondary) 68%, white 32%);
  --code-copy-success: color-mix(in srgb, var(--secondary) 90%, white 10%);
  --prose-heading-surface: color-mix(
    in srgb,
    var(--surface-raised) 90%,
    white 10%
  );
  --prose-heading-border: color-mix(
    in srgb,
    var(--border-strong) 86%,
    transparent
  );
  --prose-heading-accent: color-mix(
    in srgb,
    var(--secondary) 82%,
    var(--darkgray) 18%
  );
  --prose-subheading-surface: color-mix(
    in srgb,
    var(--surface-subtle) 94%,
    transparent
  );
  --prose-subheading-border: color-mix(
    in srgb,
    var(--border-soft) 90%,
    transparent
  );
  --prose-subheading-accent: color-mix(
    in srgb,
    var(--tertiary) 68%,
    var(--secondary) 32%
  );
  --prose-rule: color-mix(in srgb, var(--divider-soft) 92%, transparent);
  --prose-blockquote-surface: color-mix(
    in srgb,
    var(--highlight) 34%,
    transparent
  );
  --prose-blockquote-border: color-mix(
    in srgb,
    var(--secondary) 66%,
    transparent
  );
  --prose-blockquote-text: color-mix(
    in srgb,
    var(--body-text) 88%,
    var(--secondary) 12%
  );
  --prose-table-header: color-mix(in srgb, var(--surface-subtle) 96%, white 4%);
  --prose-table-grid: color-mix(in srgb, var(--divider-soft) 90%, transparent);
  --prose-table-row-alt: color-mix(
    in srgb,
    var(--surface-subtle) 88%,
    transparent
  );
  --prose-caption: color-mix(
    in srgb,
    var(--muted-text) 82%,
    var(--secondary) 18%
  );
  --prose-kbd-surface: color-mix(in srgb, var(--surface-raised) 92%, white 8%);
  --prose-kbd-border: color-mix(in srgb, var(--border-soft) 88%, transparent);
  --prose-kbd-shadow: 0 6px 18px -12px rgba(38, 30, 22, 0.28);
  --prose-mark-bg: color-mix(in srgb, var(--text-highlight) 76%, transparent);
  --prose-mark-text: color-mix(in srgb, var(--dark) 82%, var(--secondary) 18%);
  --prose-code-border: color-mix(in srgb, var(--badge-border) 82%, transparent);
  /* Notes card marker sizing — adjust width/offset to tweak the triangle footprint */
  --card-marker-width: 0.6rem;
  --card-marker-offset: 0.34rem;
  --card-marker: color-mix(in srgb, var(--secondary) 70%, rgba(0, 0, 0, 0.08));
  --card-marker-hover: color-mix(
    in srgb,
    var(--secondary) 60%,
    rgba(255, 255, 255, 0.4)
  );
  --card-marker-muted: color-mix(
    in srgb,
    var(--tertiary) 38%,
    rgba(0, 0, 0, 0.12)
  );
  --layout-max-width: min(1040px, calc(100vw - 32px));
}

html[data-theme="dark"] {
  --font-sans:
    "IBM Plex Sans", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
    "Noto Sans", sans-serif;
  --font-mono:
    "IBM Plex Mono", "SFMono-Regular", Menlo, Consolas, "Liberation Mono",
    monospace;

  --light: #201d1a;
  --lightgray: #2b2723;
  --gray: #6a6155;
  --darkgray: #d7ccba;
  --dark: #f8f3e8;
  --secondary: #7dc589;
  --tertiary: #e3b676;
  --accent: color-mix(in srgb, var(--secondary) 88%, rgba(255, 255, 255, 0.18));
  --heading-accent: color-mix(in srgb, var(--secondary) 84%, white 16%);
  --highlight: rgba(125, 197, 137, 0.22);
  --text-highlight: rgba(255, 188, 120, 0.35);
  --radius-xs: 2px;
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 12px;

  --body-bg: #1f1d1a;
  --body-text: #d7ccba;
  --muted-text: #9b907f;
  --surface-outline: color-mix(
    in srgb,
    var(--lightgray) 56%,
    rgba(0, 0, 0, 0.38)
  );
  --surface-outline-strong: color-mix(
    in srgb,
    var(--lightgray) 64%,
    rgba(0, 0, 0, 0.32)
  );
  --surface-subtle: color-mix(
    in srgb,
    var(--lightgray) 72%,
    rgba(0, 0, 0, 0.3)
  );
  --surface-raised: color-mix(
    in srgb,
    var(--lightgray) 70%,
    rgba(0, 0, 0, 0.28)
  );
  --surface-raised-strong: color-mix(
    in srgb,
    var(--lightgray) 60%,
    rgba(0, 0, 0, 0.34)
  );
  --app-background: color-mix(in srgb, var(--body-bg) 92%, rgba(0, 0, 0, 0.08));
  --border-soft: color-mix(in srgb, var(--surface-outline) 68%, transparent);
  --border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 82%,
    transparent
  );
  --card-border: color-mix(
    in srgb,
    var(--surface-outline) 86%,
    rgba(255, 255, 255, 0.12)
  );
  --card-border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 90%,
    rgba(255, 255, 255, 0.16)
  );
  --card-shadow: none;
  --card-shadow-hover: none;
  --divider-soft: color-mix(in srgb, var(--surface-outline) 66%, transparent);
  --divider-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 86%,
    transparent
  );
  --shell-shadow: 0 24px 44px -30px rgba(0, 0, 0, 0.6);
  --header-surface: color-mix(
    in srgb,
    var(--lightgray) 84%,
    rgba(0, 0, 0, 0.18)
  );
  --header-divider: color-mix(in srgb, var(--surface-outline) 78%, transparent);
  --header-shadow: 0 24px 44px -30px rgba(0, 0, 0, 0.62);
  --sidebar-surface: color-mix(
    in srgb,
    var(--lightgray) 72%,
    rgba(0, 0, 0, 0.3)
  );
  --sidebar-surface-hover: color-mix(
    in srgb,
    var(--lightgray) 78%,
    rgba(0, 0, 0, 0.24)
  );
  --control-surface: color-mix(in srgb, var(--nav-surface) 90%, transparent);
  --control-hover: color-mix(
    in srgb,
    var(--nav-surface-strong) 90%,
    transparent
  );
  --control-border: color-mix(in srgb, var(--surface-outline) 70%, transparent);
  --control-border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 80%,
    transparent
  );
  --control-shadow: 0 22px 42px -28px rgba(0, 0, 0, 0.58);
  --nav-surface: #1b1915;
  --nav-surface-strong: #221f1a;
  --nav-border: #383024;
  --nav-hover-bg: color-mix(
    in srgb,
    var(--nav-surface-strong) 92%,
    transparent
  );
  --nav-active-bg: color-mix(in srgb, var(--secondary) 20%, var(--nav-surface));
  --nav-text: color-mix(in srgb, var(--body-text) 82%, var(--muted-text) 18%);
  --nav-text-strong: color-mix(
    in srgb,
    var(--secondary) 78%,
    var(--body-text) 22%
  );
  --link-plain: color-mix(in srgb, var(--secondary) 66%, var(--body-text) 34%);
  --link-hover: color-mix(in srgb, var(--tertiary) 58%, var(--secondary) 42%);
  --badge-surface: color-mix(
    in srgb,
    var(--highlight) 62%,
    rgba(0, 0, 0, 0.35)
  );
  --badge-border: color-mix(in srgb, var(--surface-outline) 70%, transparent);
  --badge-text: color-mix(in srgb, var(--body-text) 88%, rgba(0, 0, 0, 0.12));
  --ring-accent: color-mix(in srgb, var(--secondary) 38%, rgba(0, 0, 0, 0.4));
  --accent-underline: linear-gradient(
    90deg,
    color-mix(in srgb, var(--secondary) 78%, rgba(0, 0, 0, 0.25)),
    color-mix(in srgb, var(--secondary) 46%, var(--tertiary) 18%)
  );
  --pill-radius: var(--radius-lg);
  --pill-gap: 0.34rem;
  --pill-surface: color-mix(
    in srgb,
    var(--nav-surface) 88%,
    rgba(255, 255, 255, 0.08)
  );
  --pill-hover-surface: color-mix(
    in srgb,
    var(--secondary) 26%,
    var(--pill-surface)
  );
  --pill-active-surface: color-mix(
    in srgb,
    var(--secondary) 36%,
    var(--pill-surface)
  );
  --pill-ghost-surface: color-mix(
    in srgb,
    var(--pill-surface) 46%,
    transparent
  );
  --pill-ghost-hover: color-mix(
    in srgb,
    var(--pill-hover-surface) 66%,
    transparent
  );
  --pill-ghost-active: color-mix(
    in srgb,
    var(--pill-active-surface) 72%,
    transparent
  );
  --pill-border: color-mix(in srgb, var(--surface-outline) 76%, transparent);
  --pill-border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 88%,
    transparent
  );
  --pill-text: color-mix(in srgb, var(--muted-text) 72%, var(--body-text) 28%);
  --pill-text-strong: color-mix(in srgb, var(--heading-accent) 86%, white 14%);
  --pill-shadow: 0 22px 48px -32px rgba(0, 0, 0, 0.54);
  --card-padding-inline: 1.05rem;
  --card-padding-block: 1.25rem;
  --card-content-gap: 0.95rem;
  --card-meta-size: 0.64rem;
  --card-meta-tracking: 0.22em;
  --card-heading-h2: var(--type-heading-lg);
  --card-heading-h3: var(--type-heading-md);
  --card-heading-h3-min-height: calc(var(--card-heading-h3) * 1.4 * 2);
  --card-body-size: var(--type-body-small);
  --card-body-leading: var(--type-body-small-leading);
  --card-footer-size: 0.62rem;
  --card-footer-tracking: 0.2em;
  --card-min-height-h3: 10.75rem;
  --card-icon-surface: color-mix(
    in srgb,
    var(--nav-surface-strong) 88%,
    rgba(255, 255, 255, 0.08)
  );
  --card-icon-border: color-mix(
    in srgb,
    var(--surface-outline) 82%,
    transparent
  );
  --card-icon-shadow: 0 26px 54px -32px rgba(0, 0, 0, 0.62);
  --card-icon-shadow-hover: 0 32px 64px -32px rgba(0, 0, 0, 0.68);
  --card-icon-foreground: color-mix(in srgb, var(--secondary) 86%, white 14%);
  --code-card-surface: color-mix(
    in srgb,
    var(--nav-surface-strong) 88%,
    rgba(255, 255, 255, 0.05)
  );
  --code-card-border: color-mix(
    in srgb,
    var(--border-strong) 90%,
    rgba(255, 255, 255, 0.12)
  );
  --code-card-shadow: 0 28px 64px -34px rgba(0, 0, 0, 0.74);
  --code-copy-offset: 1.15rem;
  --code-copy-text: color-mix(in srgb, var(--heading-accent) 84%, white 16%);
  --code-copy-bg: color-mix(
    in srgb,
    var(--pill-surface) 70%,
    rgba(115, 191, 146, 0.32)
  );
  --code-copy-border: color-mix(
    in srgb,
    var(--pill-border-strong) 82%,
    rgba(115, 191, 146, 0.42)
  );
  --code-copy-hover-bg: color-mix(
    in srgb,
    var(--pill-hover-surface) 66%,
    rgba(115, 191, 146, 0.42)
  );
  --code-copy-active-bg: color-mix(
    in srgb,
    var(--pill-active-surface) 60%,
    rgba(115, 191, 146, 0.5)
  );
  --code-copy-ring: color-mix(in srgb, var(--secondary) 74%, white 26%);
  --code-copy-success: color-mix(in srgb, var(--secondary) 92%, white 8%);
  --prose-heading-surface: color-mix(
    in srgb,
    var(--surface-raised) 86%,
    rgba(0, 0, 0, 0.36)
  );
  --prose-heading-border: color-mix(
    in srgb,
    var(--border-strong) 74%,
    transparent
  );
  --prose-heading-accent: color-mix(
    in srgb,
    var(--secondary) 85%,
    var(--light) 15%
  );
  --prose-subheading-surface: color-mix(
    in srgb,
    var(--surface-subtle) 78%,
    rgba(0, 0, 0, 0.36)
  );
  --prose-subheading-border: color-mix(
    in srgb,
    var(--border-soft) 72%,
    transparent
  );
  --prose-subheading-accent: color-mix(
    in srgb,
    var(--tertiary) 70%,
    var(--secondary) 30%
  );
  --prose-rule: color-mix(in srgb, var(--divider-soft) 70%, transparent);
  --prose-blockquote-surface: color-mix(
    in srgb,
    rgba(125, 197, 137, 0.32),
    transparent
  );
  --prose-blockquote-border: color-mix(
    in srgb,
    var(--secondary) 72%,
    transparent
  );
  --prose-blockquote-text: color-mix(
    in srgb,
    var(--body-text) 84%,
    var(--secondary) 16%
  );
  --prose-table-header: color-mix(
    in srgb,
    var(--surface-raised) 82%,
    rgba(0, 0, 0, 0.3)
  );
  --prose-table-grid: color-mix(in srgb, var(--divider-soft) 72%, transparent);
  --prose-table-row-alt: color-mix(
    in srgb,
    var(--surface-subtle) 74%,
    rgba(0, 0, 0, 0.3)
  );
  --prose-caption: color-mix(
    in srgb,
    var(--muted-text) 78%,
    var(--secondary) 22%
  );
  --prose-kbd-surface: color-mix(
    in srgb,
    var(--surface-raised) 84%,
    rgba(0, 0, 0, 0.4)
  );
  --prose-kbd-border: color-mix(in srgb, var(--border-soft) 68%, transparent);
  --prose-kbd-shadow: 0 12px 30px -20px rgba(0, 0, 0, 0.66);
  --prose-mark-bg: color-mix(in srgb, rgba(125, 197, 137, 0.32), transparent);
  --prose-mark-text: color-mix(
    in srgb,
    var(--body-text) 88%,
    var(--secondary) 12%
  );
  --prose-code-border: color-mix(in srgb, var(--badge-border) 70%, transparent);
  /* Notes card marker sizing — adjust width/offset to tweak the triangle footprint */
  --card-marker-width: 0.6rem;
  --card-marker-offset: 0.34rem;
  --card-marker: color-mix(in srgb, var(--secondary) 60%, rgba(0, 0, 0, 0.32));
  --card-marker-hover: color-mix(
    in srgb,
    var(--secondary) 54%,
    rgba(255, 255, 255, 0.45)
  );
  --card-marker-muted: color-mix(
    in srgb,
    var(--tertiary) 34%,
    rgba(0, 0, 0, 0.38)
  );
  --layout-max-width: min(1040px, calc(100vw - 32px));
}

@theme inline {
  --color-background: var(--app-background);
  --color-foreground: var(--body-text);
  --color-accent: var(--secondary);
  --color-muted: var(--surface-subtle);
  --color-border: var(--border-soft);
  --color-light: var(--light);
  --color-lightgray: var(--lightgray);
  --color-gray: var(--gray);
  --color-darkgray: var(--darkgray);
  --color-dark: var(--dark);
  --color-secondary: var(--secondary);
  --color-tertiary: var(--tertiary);
  --color-highlight: var(--highlight);
  --color-text-highlight: var(--text-highlight);
}

@layer base {
  * {
    border-color: var(--border-soft);
    outline-color: color-mix(in srgb, var(--ring-accent) 80%, transparent);
    scrollbar-width: thin;
    scrollbar-color: color-mix(in srgb, var(--surface-outline) 50%, transparent)
      transparent;
  }

  html {
    @apply overflow-y-scroll scroll-smooth;
    background: var(--body-bg);
  }

  body {
    min-height: 100svh;
    display: flex;
    flex-direction: column;
    font-family: var(--font-sans);
    font-feature-settings: "calt", "liga", "ss01";
    font-size: var(--type-body-size);
    line-height: var(--type-body-leading);
    letter-spacing: var(--type-body-letter);
    color: var(--body-text);
    background: var(--body-bg);
  }

  ::selection {
    background: color-mix(in srgb, var(--highlight) 60%, transparent);
    color: var(--darkgray);
  }

  a {
    color: var(--link-plain);
    font-weight: 600;
    transition: color 0.2s ease;

    &:where(:hover, :focus-visible) {
      color: var(--link-hover);
    }
  }

  a,
  button {
    @apply outline-offset-2;
    @apply focus-visible:no-underline focus-visible:outline-2 focus-visible:outline-dotted;
  }

  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }

  section,
  footer {
    width: min(
      var(--layout-max-width),
      calc(100% - clamp(2rem, 4.5vw, 3.5rem))
    );
    @apply mx-auto px-3.5;
  }

  .surface {
    background: var(--surface-raised);
  }

  .grid-equal {
    grid-auto-rows: 1fr;
  }
}

@layer components {
  .pill {
    --_pill-bg: var(--pill-surface);
    --_pill-hover-bg: var(--pill-hover-surface);
    --_pill-active-bg: var(--pill-active-surface);
    --_pill-border: var(--pill-border);
    --_pill-border-strong: var(--pill-border-strong);
    --_pill-text: var(--pill-text);
    --_pill-text-strong: var(--pill-text-strong);
    --_pill-shadow: var(--pill-shadow);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--pill-gap);
    padding-inline: var(--pill-padding-inline, 0.78rem);
    padding-block: var(--pill-padding-block, 0.32rem);
    border-radius: var(--pill-radius);
    border: 1px solid var(--_pill-border);
    background: var(--_pill-bg);
    color: var(--_pill-text);
    font-size: var(--pill-font-size, 0.62rem);
    font-weight: 600;
    letter-spacing: var(--pill-letter-spacing, 0.2em);
    text-transform: uppercase;
    line-height: 1;
    transition:
      color 180ms ease,
      background-color 180ms ease,
      border-color 180ms ease,
      box-shadow 220ms ease,
      transform 180ms ease;
  }

  .pill svg {
    width: 0.85rem;
    height: 0.85rem;
  }

  .pill:where(:hover, :focus-visible) {
    color: var(--_pill-text-strong);
    background-color: var(--_pill-hover-bg);
    border-color: var(--_pill-border-strong);
    box-shadow: var(--_pill-shadow);
  }

  .pill:focus-visible {
    outline: none;
    box-shadow:
      var(--_pill-shadow),
      0 0 0 2px color-mix(in srgb, var(--ring-accent) 88%, transparent);
  }

  .pill:active {
    background-color: var(--_pill-active-bg);
  }

  .pill[aria-disabled="true"],
  .pill[disabled] {
    cursor: not-allowed;
    opacity: 0.56;
    box-shadow: none;
  }

  .pill[aria-disabled="true"]:where(:hover, :focus-visible),
  .pill[disabled]:where(:hover, :focus-visible) {
    color: var(--_pill-text);
    background: var(--_pill-bg);
    border-color: var(--_pill-border);
    box-shadow: none;
  }

  .pill--standard {
    --pill-padding-block: 0.28rem;
    --pill-padding-inline: 0.68rem;
    --pill-letter-spacing: 0.2em;
  }

  .pill--compact {
    --pill-gap: 0.32rem;
    --pill-padding-block: 0.26rem;
    --pill-padding-inline: 0.64rem;
    --pill-font-size: 0.58rem;
    --pill-letter-spacing: 0.2em;
  }

  .pill--roomy {
    --pill-gap: 0.46rem;
    --pill-padding-block: 0.44rem;
    --pill-padding-inline: 0.92rem;
    --pill-font-size: 0.68rem;
  }

  .pill--ghost {
    --_pill-bg: var(--pill-ghost-surface);
    --_pill-hover-bg: var(--pill-ghost-hover);
    --_pill-active-bg: var(--pill-ghost-active);
  }

  .card-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.6rem;
    height: 1.6rem;
    border-radius: var(--radius-md);
    border: 1px solid var(--card-icon-border);
    background: var(--card-icon-surface);
    color: var(--card-icon-foreground);
    box-shadow: var(--card-icon-shadow);
    transition:
      transform 180ms ease,
      box-shadow 220ms ease;
  }

  .card-icon svg {
    width: 0.85rem;
    height: 0.85rem;
  }

  .group:where(:hover, :focus-visible) .card-icon {
    transform: translateY(-0.1rem);
    box-shadow: var(--card-icon-shadow-hover);
  }

  a[data-card-variant="h3"] {
    min-height: var(--card-min-height-h3);
  }

  a[data-card-variant="h3"] h3 {
    min-height: var(--card-heading-h3-min-height);
    display: -webkit-box;
    line-clamp: 2;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

@utility max-w-app {
  max-width: min(
    var(--layout-max-width),
    calc(100vw - clamp(2rem, 5vw, 3.4rem))
  );
}

@utility site-shell {
  width: min(var(--layout-max-width), calc(100% - clamp(2.25rem, 6vw, 4rem)));
  @apply mx-auto px-3 sm:px-4;
}

/* Source: https://piccalil.li/blog/a-more-modern-css-reset/ */
/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 1rem;
}
