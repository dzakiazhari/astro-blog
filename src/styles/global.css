@import "tailwindcss";
@import "./typography.css";
@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@400;500;600;700&display=swap");

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

:root,
html[data-theme="light"] {
  --font-sans:
    "IBM Plex Sans", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
    "Noto Sans", sans-serif;
  --font-mono:
    "IBM Plex Mono", "SFMono-Regular", Menlo, Consolas, "Liberation Mono",
    monospace;

  --light: #fcf5e4;
  --lightgray: #e4dcc8;
  --gray: #a29583;
  --darkgray: #51463a;
  --dark: #231d16;
  --secondary: #5d8f63;
  --tertiary: #d3a567;
  --highlight: rgba(93, 143, 99, 0.22);
  --text-highlight: rgba(255, 214, 140, 0.45);
  --radius-xs: 2px;
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 12px;

  --body-bg: var(--light);
  --body-text: color-mix(in srgb, var(--dark) 90%, black 10%);
  --muted-text: color-mix(in srgb, var(--gray) 64%, var(--darkgray) 36%);
  --surface-outline: color-mix(in srgb, var(--lightgray) 70%, var(--gray) 30%);
  --surface-outline-strong: color-mix(
    in srgb,
    var(--lightgray) 78%,
    var(--gray) 22%
  );
  --surface-subtle: color-mix(in srgb, var(--light) 92%, white 8%);
  --surface-raised: color-mix(in srgb, var(--light) 96%, white 4%);
  --surface-raised-strong: color-mix(in srgb, var(--light) 88%, white 12%);
  --app-background: color-mix(in srgb, var(--body-bg) 96%, white 4%);
  --border-soft: color-mix(in srgb, var(--surface-outline) 74%, transparent);
  --border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 84%,
    transparent
  );
  --divider-soft: color-mix(in srgb, var(--surface-outline) 70%, transparent);
  --divider-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 90%,
    transparent
  );
  --shell-shadow: 0 22px 40px -32px rgba(30, 26, 20, 0.32);
  --header-surface: color-mix(in srgb, var(--light) 96%, white 4%);
  --header-divider: color-mix(in srgb, var(--lightgray) 62%, var(--gray) 38%);
  --header-shadow: 0 22px 40px -32px rgba(30, 26, 20, 0.35);
  --sidebar-surface: color-mix(in srgb, var(--light) 94%, white 6%);
  --sidebar-surface-hover: color-mix(in srgb, var(--light) 86%, white 14%);
  --control-surface: color-mix(in srgb, var(--sidebar-surface) 92%, white 8%);
  --control-hover: color-mix(
    in srgb,
    var(--sidebar-surface-hover) 92%,
    white 8%
  );
  --control-border: color-mix(in srgb, var(--surface-outline) 72%, transparent);
  --control-border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 82%,
    transparent
  );
  --control-shadow: 0 18px 36px -24px rgba(50, 40, 28, 0.28);
  --nav-surface: #f8f1e6;
  --nav-border: color-mix(in srgb, var(--surface-outline) 78%, transparent);
  --nav-hover-bg: color-mix(
    in srgb,
    var(--sidebar-surface-hover) 92%,
    transparent
  );
  --nav-active-bg: color-mix(
    in srgb,
    var(--secondary) 18%,
    var(--sidebar-surface)
  );
  --nav-text: color-mix(in srgb, var(--muted-text) 82%, var(--body-text) 18%);
  --nav-text-strong: color-mix(in srgb, var(--secondary) 90%, white 10%);
  --link-plain: color-mix(in srgb, var(--secondary) 70%, var(--dark) 30%);
  --link-hover: color-mix(in srgb, var(--tertiary) 60%, var(--secondary) 40%);
  --badge-surface: color-mix(in srgb, var(--highlight) 48%, transparent);
  --badge-border: color-mix(in srgb, var(--surface-outline) 66%, transparent);
  --badge-text: color-mix(in srgb, var(--darkgray) 92%, var(--secondary) 8%);
  --ring-accent: color-mix(in srgb, var(--secondary) 32%, transparent);
  --accent-underline: linear-gradient(
    90deg,
    var(--secondary),
    color-mix(in srgb, var(--secondary) 48%, var(--tertiary))
  );
  --card-marker: color-mix(in srgb, var(--secondary) 70%, rgba(0, 0, 0, 0.08));
  --card-marker-muted: color-mix(
    in srgb,
    var(--tertiary) 38%,
    rgba(0, 0, 0, 0.12)
  );
  --layout-max-width: min(1400px, calc(100vw - 48px));
}

html[data-theme="dark"] {
  --font-sans:
    "IBM Plex Sans", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
    "Noto Sans", sans-serif;
  --font-mono:
    "IBM Plex Mono", "SFMono-Regular", Menlo, Consolas, "Liberation Mono",
    monospace;

  --light: #201d1a;
  --lightgray: #2b2723;
  --gray: #6a6155;
  --darkgray: #d7ccba;
  --dark: #f8f3e8;
  --secondary: #7dc589;
  --tertiary: #e3b676;
  --highlight: rgba(125, 197, 137, 0.22);
  --text-highlight: rgba(255, 188, 120, 0.35);
  --radius-xs: 2px;
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 12px;

  --body-bg: #1f1d1a;
  --body-text: #d7ccba;
  --muted-text: #9b907f;
  --surface-outline: color-mix(
    in srgb,
    var(--lightgray) 56%,
    rgba(0, 0, 0, 0.38)
  );
  --surface-outline-strong: color-mix(
    in srgb,
    var(--lightgray) 64%,
    rgba(0, 0, 0, 0.32)
  );
  --surface-subtle: color-mix(
    in srgb,
    var(--lightgray) 72%,
    rgba(0, 0, 0, 0.3)
  );
  --surface-raised: color-mix(
    in srgb,
    var(--lightgray) 70%,
    rgba(0, 0, 0, 0.28)
  );
  --surface-raised-strong: color-mix(
    in srgb,
    var(--lightgray) 60%,
    rgba(0, 0, 0, 0.34)
  );
  --app-background: color-mix(in srgb, var(--body-bg) 92%, rgba(0, 0, 0, 0.08));
  --border-soft: color-mix(in srgb, var(--surface-outline) 68%, transparent);
  --border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 82%,
    transparent
  );
  --divider-soft: color-mix(in srgb, var(--surface-outline) 66%, transparent);
  --divider-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 86%,
    transparent
  );
  --shell-shadow: 0 24px 44px -30px rgba(0, 0, 0, 0.6);
  --header-surface: color-mix(
    in srgb,
    var(--lightgray) 84%,
    rgba(0, 0, 0, 0.18)
  );
  --header-divider: color-mix(in srgb, var(--surface-outline) 78%, transparent);
  --header-shadow: 0 24px 44px -30px rgba(0, 0, 0, 0.62);
  --sidebar-surface: color-mix(
    in srgb,
    var(--lightgray) 72%,
    rgba(0, 0, 0, 0.3)
  );
  --sidebar-surface-hover: color-mix(
    in srgb,
    var(--lightgray) 78%,
    rgba(0, 0, 0, 0.24)
  );
  --control-surface: color-mix(in srgb, var(--nav-surface) 90%, transparent);
  --control-hover: color-mix(
    in srgb,
    var(--nav-surface-strong) 90%,
    transparent
  );
  --control-border: color-mix(in srgb, var(--surface-outline) 70%, transparent);
  --control-border-strong: color-mix(
    in srgb,
    var(--surface-outline-strong) 80%,
    transparent
  );
  --control-shadow: 0 22px 42px -28px rgba(0, 0, 0, 0.58);
  --nav-surface: #1b1915;
  --nav-surface-strong: #221f1a;
  --nav-border: #383024;
  --nav-hover-bg: color-mix(
    in srgb,
    var(--nav-surface-strong) 92%,
    transparent
  );
  --nav-active-bg: color-mix(in srgb, var(--secondary) 20%, var(--nav-surface));
  --nav-text: color-mix(in srgb, var(--body-text) 82%, var(--muted-text) 18%);
  --nav-text-strong: color-mix(
    in srgb,
    var(--secondary) 70%,
    var(--body-text) 30%
  );
  --link-plain: color-mix(in srgb, var(--secondary) 66%, var(--body-text) 34%);
  --link-hover: color-mix(in srgb, var(--tertiary) 58%, var(--secondary) 42%);
  --badge-surface: color-mix(
    in srgb,
    var(--highlight) 62%,
    rgba(0, 0, 0, 0.35)
  );
  --badge-border: color-mix(in srgb, var(--surface-outline) 70%, transparent);
  --badge-text: color-mix(in srgb, var(--body-text) 88%, rgba(0, 0, 0, 0.12));
  --ring-accent: color-mix(in srgb, var(--secondary) 38%, rgba(0, 0, 0, 0.4));
  --accent-underline: linear-gradient(
    90deg,
    color-mix(in srgb, var(--secondary) 78%, rgba(0, 0, 0, 0.25)),
    color-mix(in srgb, var(--secondary) 46%, var(--tertiary) 18%)
  );
  --card-marker: color-mix(in srgb, var(--secondary) 60%, rgba(0, 0, 0, 0.32));
  --card-marker-muted: color-mix(
    in srgb,
    var(--tertiary) 34%,
    rgba(0, 0, 0, 0.38)
  );
  --layout-max-width: min(1280px, calc(100vw - 64px));
}

@theme inline {
  --color-background: var(--app-background);
  --color-foreground: var(--body-text);
  --color-accent: var(--secondary);
  --color-muted: var(--surface-subtle);
  --color-border: var(--border-soft);
  --color-light: var(--light);
  --color-lightgray: var(--lightgray);
  --color-gray: var(--gray);
  --color-darkgray: var(--darkgray);
  --color-dark: var(--dark);
  --color-secondary: var(--secondary);
  --color-tertiary: var(--tertiary);
  --color-highlight: var(--highlight);
  --color-text-highlight: var(--text-highlight);
}

@layer base {
  * {
    border-color: var(--border-soft);
    outline-color: color-mix(in srgb, var(--ring-accent) 80%, transparent);
    scrollbar-width: thin;
    scrollbar-color: color-mix(in srgb, var(--surface-outline) 50%, transparent)
      transparent;
  }

  html {
    @apply overflow-y-scroll scroll-smooth;
    background: var(--body-bg);
  }

  body {
    min-height: 100svh;
    display: flex;
    flex-direction: column;
    font-family: var(--font-sans);
    font-feature-settings: "calt", "liga", "ss01";
    color: var(--body-text);
    background: var(--body-bg);
  }

  ::selection {
    background: color-mix(in srgb, var(--highlight) 60%, transparent);
    color: var(--darkgray);
  }

  a {
    color: var(--link-plain);
    font-weight: 600;
    transition: color 0.2s ease;

    &:where(:hover, :focus-visible) {
      color: var(--link-hover);
    }
  }

  a,
  button {
    @apply outline-offset-2;
    @apply focus-visible:no-underline focus-visible:outline-2 focus-visible:outline-dotted;
  }

  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }

  section,
  footer {
    width: min(var(--layout-max-width), calc(100% - clamp(3rem, 6vw, 4.5rem)));
    @apply mx-auto px-5;
  }

  .surface {
    background: var(--surface-raised);
  }

  .grid-equal {
    grid-auto-rows: 1fr;
  }
}

@utility max-w-app {
  max-width: min(
    var(--layout-max-width),
    calc(100vw - clamp(3rem, 7vw, 4.8rem))
  );
}

@utility site-shell {
  width: min(var(--layout-max-width), calc(100% - clamp(3rem, 6vw, 4.5rem)));
  @apply mx-auto px-5 sm:px-6;
}

/* Source: https://piccalil.li/blog/a-more-modern-css-reset/ */
/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 1rem;
}
