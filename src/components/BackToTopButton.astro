---
import IconArrowNarrowUp from "@/assets/icons/IconArrowNarrowUp.svg";
---

<div
  id="btt-btn-container"
  class:list={[
    "pointer-events-none fixed z-50",
    "translate-y-16 opacity-0 transition duration-500",
  ]}
  style="inset-inline-end: max(1rem, env(safe-area-inset-right)); inset-block-end: max(1.5rem, env(safe-area-inset-bottom));"
>
  <button
    data-button="back-to-top"
    class:list={[
      "group relative flex items-center gap-2",
      "pointer-events-auto rounded-full border border-border/60 bg-background/90 px-3.5 py-2 text-sm font-medium text-foreground/70 shadow-xl shadow-black/10 backdrop-blur",
      "hover:border-accent/40 hover:text-accent focus-visible:ring-2 focus-visible:ring-accent/50 focus-visible:outline-none",
    ]}
  >
    <span class="relative flex h-10 w-10 items-center justify-center">
      <span
        id="progress-indicator"
        class="absolute inset-0 rounded-full border border-border/60 bg-background/70"
        aria-hidden="true"></span>
      <span
        class="relative flex h-8 w-8 items-center justify-center rounded-full bg-accent/15 text-accent transition group-hover:bg-accent/25 group-focus-visible:bg-accent/25"
      >
        <IconArrowNarrowUp class="h-4 w-4" />
      </span>
    </span>
    <span
      class="pe-1 text-xs tracking-wide text-foreground/70 uppercase transition group-hover:text-foreground group-focus-visible:text-foreground"
    >
      Back to top
    </span>
  </button>
</div>

<script src="/scripts/back-to-top.js" defer></script>

<style is:global>
  #btt-btn-container #progress-indicator {
    --accent-color: var(--color-accent);
    /* Circular progress ring around the icon */
    background:
      conic-gradient(var(--accent-color) var(--progress, 0%), transparent 0),
      radial-gradient(
        farthest-side,
        transparent calc(100% - 3px),
        var(--color-background) calc(100% - 2px)
      );
    box-shadow: inset 0 0 0 1px
      color-mix(in oklab, var(--accent-color) 35%, transparent 65%);
  }
</style>
