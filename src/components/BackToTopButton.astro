---
import IconChevronLeft from "@/assets/icons/IconChevronLeft.svg";
import IconArrowNarrowUp from "@/assets/icons/IconArrowNarrowUp.svg";
---

<div
  id="btt-btn-container"
  class:list={[
    "fixed z-50",
    "translate-y-14 opacity-0 transition duration-500",
  ]}
  style="inset-inline-end: max(1rem, env(safe-area-inset-right)); inset-block-end: max(1.25rem, env(safe-area-inset-bottom)); --accent: #e11d48;"
>
  <button
    data-button="back-to-top"
    class:list={[
      "group relative px-3 py-2",
      "h-12 w-12 rounded-full shadow-lg",
      "bg-background/80 bg-clip-padding backdrop-blur-md border border-border",
      "focus-visible:outline-2 focus-visible:outline-dashed focus-visible:outline-accent",
    ]}
  >
    <span
      id="progress-indicator"
      class="absolute inset-0 -z-10 block h-12 w-12 scale-110 rounded-full bg-transparent"
    ></span>
    <IconChevronLeft class="inline-block rotate-90 text-[#e11d48]" />
    <span class="sr-only">Back To Top</span>
  </button>
</div>

<script src="/scripts/back-to-top.js" defer></script>

<style is:global>
  #btt-btn-container #progress-indicator {
    /* Circular progress ring with cutout; progress set via --progress (0-100) */
    background:
      conic-gradient(var(--accent) var(--progress, 0%), transparent 0),
      radial-gradient(farthest-side, var(--color-background) 70%, transparent 71%);
  }

  /* Provide a faint track using an outline around the ring */
  #btt-btn-container button {
    box-shadow: 0 2px 10px color-mix(in oklab, var(--color-foreground) 12%, transparent);
  }
</style>
